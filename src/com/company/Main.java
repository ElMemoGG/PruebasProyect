package com.company;

public class Main {

    public static double[] Calcular(double[][] matriz, double b0, double b1){
        double[] resultado= new double[3];

        double aux = 0;
        for (int i = 0; i < matriz.length; i++) {
             aux = matriz[i][0] -(b0+b1*matriz[i][1]);
            resultado[0] += aux;
            resultado[1] +=matriz[i][1]*aux;
            resultado[2] +=aux;
        }

        resultado[0] = -2*(resultado[0])/ matriz.length;
        resultado[1] = -2*(resultado[1])/ matriz.length;
        resultado[2] = (resultado[2]*resultado[2])* 1/matriz.length;

        return resultado;
    }

    public static void getGradinte(double[][] matriz){
        double b0 = 0, b1 = 0, a = 0.0005, error = 0;
        for (int i = 0; i <150000 ; i++) {
            double[] aux = Calcular( matriz,  b0,  b1);
            //System.out.println("iteracion "+i+" -------------------------");
            b0 = (b0 - a*aux[0]);
            b1 = (b1 - a*aux[1]);
            error = aux[2];

           // System.out.println(aux[0]);
           // System.out.println(aux[1]);
        }
        System.out.println("error: "+error);
        System.out.println("b0= "+b0);
        System.out.println("b1= "+b1);


    }

    public static void generador(double x){
        double x2 = x;
        double a=13;
        double c = 7;
        double m = 9;
        for (int i = 0; i < 1000; i++) {
            x = (a*x +c)%m;
            System.out.println("  x"+i+": "+x +"  r"+i+": "+(x/m-1) );
            if (x2 == x)
                break;
        }
    }
    static double[][] dataset = {
            {148,1},
            {85,0},
            {183,1},
            {89,0},
            {137,1},
            {116,0},
            {78,1},
            {115,0},
            {197,1},
            {125,1},
            {110,0},
            {168,1},
            {139,0},
            {189,1},
            {166,1},
            {100,1},
            {118,1},
            {107,1},
            {103,0},
            {115,1},
            {126,0},
            {99,0},
            {196,1},
            {119,1},
            {143,1},
            {125,1},
            {147,1},
            {97,0},
            {145,0},
            {117,0},
            {109,0},
            {158,1},
            {88,0},
            {92,0},
            {122,0},
            {103,0},
            {138,0},
            {102,1},
            {90,1},
            {111,1},
            {180,0},
            {133,0},
            {106,0},
            {171,1},
            {159,0},
            {180,1},
            {146,0},
            {71,0},
            {103,1},
            {105,0},
            {103,0},
            {101,0},
            {88,0},
            {176,1},
            {150,0},
            {73,0},
            {187,1},
            {100,0},
            {146,0},
            {105,0},
            {84,0},
            {133,1},
            {44,0},
            {141,0},
            {114,1},
            {99,0},
            {109,1},
            {109,0},
            {95,0},
            {146,0},
            {100,1},
            {139,0},
            {126,1},
            {129,0},
            {79,0},
            {0,0},
            {62,0},
            {95,0},
            {131,1},
            {112,0},
            {113,0},
            {74,0},
            {83,0},
            {101,0},
            {137,1},
            {110,0},
            {106,0},
            {100,0},
            {136,1},
            {107,0},
            {80,0},
            {123,0},
            {81,0},
            {134,1},
            {142,0},
            {144,0},
            {92,0},
            {71,0},
            {93,0},
            {122,1},
            {163,1},
            {151,0},
            {125,0},
            {81,0},
            {85,0},
            {126,0},
            {96,0},
            {144,0},
            {83,0},
            {95,1},
            {171,1},
            {155,1},
            {89,0},
            {76,0},
            {160,1},
            {146,1},
            {124,1},
            {78,0},
            {97,0},
            {99,0},
            {162,1},
            {111,0},
            {107,0},
            {132,0},
            {113,1},
            {88,1},
            {120,0},
            {118,0},
            {117,1},
            {105,1},
            {173,1},
            {122,1},
            {170,1},
            {84,0},
            {96,0},
            {125,0},
            {100,0},
            {93,0},
            {129,0},
            {105,0},
            {128,0},
            {106,0},
            {108,0},
            {108,1},
            {154,0},
            {102,0},
            {57,0},
            {106,0},
            {147,0},
            {90,0},
            {136,0},
            {114,0},
            {156,1},
            {153,0},
            {188,1},
            {152,1},
            {99,0},
            {109,0},
            {88,0},
            {163,1},
            {151,0},
            {102,0},
            {114,0},
            {100,0},
            {131,1},
            {104,1},
            {148,0},
            {120,0},
            {110,0},
            {111,0},
            {102,1},
            {134,1},
            {87,0},
            {79,0},
            {75,0},
            {179,1},
            {85,0},
            {129,1},
            {143,0},
            {130,1},
            {87,0},
            {119,0},
            {0,0},
            {73,0},
            {141,0},
            {194,1},
            {181,1},
            {128,1},
            {109,1},
            {139,1},
            {111,0},
            {123,0},
            {159,1},
            {135,1},
            {85,0},
            {158,1},
            {105,0},
            {107,1},
            {109,1},
            {148,1},
            {113,0},
            {138,0},
            {108,0},
            {99,0},
            {103,0},
            {111,0},
            {196,1},
            {162,1},
            {96,0},
            {184,1},
            {81,0},
            {147,0},
            {179,0},
            {140,1},
            {112,1},
            {151,1},
            {109,1},
            {125,0},
            {85,1},
            {112,1},
            {177,1},
            {158,1},
            {119,0},
            {142,0},
            {100,0},
            {87,0},
            {101,0},
            {162,1},
            {197,0},
            {117,0},
            {142,1},
            {134,1},
            {79,0},
            {122,0},
            {74,0},
            {171,1},
            {181,1},
            {179,1},
            {164,1},
            {104,0},
            {91,0},
            {91,0},
            {139,1},
            {119,1},
            {146,0},
            {184,1},
            {122,0},
            {165,0},
            {124,0},
            {111,0},
            {106,0},
            {129,0},
            {90,0},
            {86,0},
            {92,1},
            {113,1},
            {111,0},
            {114,0},
            {193,0},
            {155,1},
            {191,0},
            {141,1},
            {95,0},
            {142,0},
            {123,1},
            {96,0},
            {138,1},
            {128,0},
            {102,0},
            {146,1},
            {101,1},
            {108,0},
            {122,0},
            {71,0},
            {106,0},
            {100,0},
            {106,1},
            {104,0},
            {114,0},
            {108,0},
            {146,1},
            {129,0},
            {133,0},
            {161,1},
            {108,1},
            {136,0},
            {155,0},
            {119,1},
            {96,0},
            {108,0},
            {78,0},
            {107,1},
            {128,1},
            {128,1},
            {161,0},
            {151,0},
            {146,1},
            {126,0},
            {100,1},
            {112,0},
            {167,1},
            {144,1},
            {77,0},
            {115,1},
            {150,0},
            {120,0},
            {161,1},
            {137,0},
            {128,1},
            {124,1},
            {80,0},
            {106,0},
            {155,1},
            {113,0},
            {109,1},
            {112,0},
            {99,0},
            {182,1},
            {115,0},
            {194,1},
            {129,0},
            {112,1},
            {124,1},
            {152,1},
            {112,0},
            {157,0},
            {122,1},
            {179,0},
            {102,1},
            {105,0},
            {118,0},
            {87,0},
            {180,1},
            {106,0},
            {95,0},
            {165,0},
            {117,0},
            {115,1},
            {152,1},
            {178,1},
            {130,0},
            {95,0},
            {0,0},
            {122,0},
            {95,0},
            {126,0},
            {139,0},
            {116,0},
            {99,0},
            {0,1},
            {92,0},
            {137,0},
            {61,0},
            {90,0},
            {90,0},
            {165,1},
            {125,1},
            {129,1},
            {88,0},
            {196,1},
            {189,1},
            {158,0},
            {103,0},
            {146,1},
            {147,0},
            {99,0},
            {124,1},
            {101,0},
            {81,0},
            {133,1},
            {173,1},
            {118,0},
            {84,0},
            {105,0},
            {122,0},
            {140,1},
            {98,0},
            {87,0},
            {156,1},
            {93,0},
            {107,0},
            {105,0},
            {109,0},
            {90,0},
            {125,0},
            {119,0},
            {116,1},
            {105,1},
            {144,1},
            {100,0},
            {100,0},
            {166,1},
            {131,0},
            {116,0},
            {158,1},
            {127,0},
            {96,0},
            {131,1},
            {82,0},
            {193,1},
            {95,1},
            {137,0},
            {136,1},
            {72,0},
            {168,1},
            {123,0},
            {115,1},
            {101,0},
            {197,1},
            {172,1},
            {102,0},
            {112,0},
            {143,0},
            {143,0},
            {138,1},
            {173,1},
            {97,0},
            {144,1},
            {83,0},
            {129,1},
            {119,0},
            {94,0},
            {102,0},
            {115,0},
            {151,1},
            {184,1},
            {94,0},
            {181,1},
            {135,0},
            {95,1},
            {99,0},
            {89,0},
            {80,0},
            {139,0},
            {90,0},
            {141,1},
            {140,0},
            {147,0},
            {97,0},
            {107,0},
            {189,1},
            {83,0},
            {117,0},
            {108,1},
            {117,1},
            {180,1},
            {100,0},
            {95,0},
            {104,1},
            {120,0},
            {82,0},
            {134,1},
            {91,0},
            {119,0},
            {100,0},
            {175,1},
            {135,0},
            {86,0},
            {148,1},
            {134,0},
            {120,0},
            {71,0},
            {74,0},
            {88,0},
            {115,0},
            {124,0},
            {74,0},
            {97,0},
            {120,1},
            {154,0},
            {144,0},
            {137,0},
            {119,0},
            {136,0},
            {114,0},
            {137,0},
            {105,1},
            {114,0},
            {126,0},
            {132,0},
            {158,1},
            {123,0},
            {85,0},
            {84,0},
            {145,1},
            {135,1},
            {139,0},
            {173,0},
            {99,0},
            {194,0},
            {83,0},
            {89,0},
            {99,0},
            {125,1},
            {80,0},
            {166,0},
            {110,0},
            {81,0},
            {195,1},
            {154,0},
            {117,0},
            {84,0},
            {0,1},
            {94,0},
            {96,0},
            {75,0},
            {180,1},
            {130,0},
            {84,0},
            {120,0},
            {84,1},
            {139,0},
            {91,0},
            {91,0},
            {99,0},
            {163,1},
            {145,1},
            {125,0},
            {76,0},
            {129,0},
            {68,0},
            {124,0},
            {114,0},
            {130,1},
            {125,0},
            {87,0},
            {97,0},
            {116,0},
            {117,0},
            {111,0},
            {122,0},
            {107,0},
            {86,0},
            {91,0},
            {77,0},
            {132,1},
            {105,0},
            {57,0},
            {127,0},
            {129,1},
            {100,1},
            {128,1},
            {90,1},
            {84,0},
            {88,0},
            {186,1},
            {187,1},
            {131,0},
            {164,0},
            {189,0},
            {116,0},
            {84,0},
            {114,0},
            {88,0},
            {84,0},
            {124,0},
            {97,0},
            {110,0},
            {103,0},
            {85,0},
            {125,1},
            {198,1},
            {87,0},
            {99,0},
            {91,0},
            {95,0},
            {99,0},
            {92,0},
            {154,0},
            {121,1},
            {78,0},
            {130,0},
            {111,0},
            {98,0},
            {143,0},
            {119,0},
            {108,0},
            {118,1},
            {133,0},
            {197,1},
            {151,1},
            {109,0},
            {121,0},
            {100,0},
            {124,1},
            {93,0},
            {143,1},
            {103,0},
            {176,1},
            {73,0},
            {111,1},
            {112,0},
            {132,1},
            {82,0},
            {123,0},
            {188,1},
            {67,0},
            {89,0},
            {173,1},
            {109,0},
            {108,0},
            {96,0},
            {124,0},
            {150,1},
            {183,1},
            {124,0},
            {181,1},
            {92,0},
            {152,0},
            {111,0},
            {106,0},
            {174,1},
            {168,1},
            {105,0},
            {138,1},
            {106,0},
            {117,0},
            {68,0},
            {112,1},
            {119,1},
            {112,0},
            {92,0},
            {183,0},
            {94,0},
            {108,0},
            {90,0},
            {125,0},
            {132,0},
            {128,0},
            {94,0},
            {114,1},
            {102,0},
            {111,0},
            {128,0},
            {92,0},
            {104,1},
            {104,0},
            {94,0},
            {97,1},
            {100,0},
            {102,0},
            {128,0},
            {147,1},
            {90,0},
            {103,0},
            {157,0},
            {167,1},
            {179,1},
            {136,1},
            {107,0},
            {91,0},
            {117,0},
            {123,0},
            {120,0},
            {106,0},
            {155,1},
            {101,0},
            {120,0},
            {127,0},
            {80,1},
            {162,0},
            {199,1},
            {167,1},
            {145,1},
            {115,1},
            {112,0},
            {145,1},
            {111,1},
            {98,0},
            {154,0},
            {165,0},
            {99,0},
            {68,0},
            {123,0},
            {91,0},
            {195,1},
            {156,1},
            {93,0},
            {121,1},
            {101,0},
            {56,0},
            {162,1},
            {95,0},
            {125,1},
            {136,0},
            {129,0},
            {130,0},
            {107,0},
            {140,0},
            {144,1},
            {107,0},
            {158,1},
            {121,0},
            {129,1},
            {90,0},
            {142,1},
            {169,1},
            {99,0},
            {127,0},
            {118,0},
            {122,0},
            {125,1},
            {168,1},
            {129,0},
            {110,0},
            {80,0},
            {115,1},
            {127,0},
            {164,1},
            {93,1},
            {158,0},
            {126,0},
            {129,1},
            {134,0},
            {102,0},
            {187,1},
            {173,1},
            {94,0},
            {108,0},
            {97,1},
            {83,0},
            {114,0},
            {149,1},
            {117,0},
            {111,0},
            {112,0},
            {116,0},
            {141,0},
            {175,0},
            {92,0},
            {130,1},
            {120,1},
            {174,1},
            {106,0},
            {105,0},
            {95,0},
            {126,0},
            {65,0},
            {99,0},
            {102,1},
            {120,1},
            {102,0},
            {109,0},
            {140,1},
            {153,0},
            {100,0},
            {147,1},
            {81,0},
            {187,1},
            {162,1},
            {136,1},
            {121,0},
            {108,0},
            {181,1},
            {154,1},
            {128,1},
            {137,0},
            {123,1},
            {106,0},
            {190,1},
            {88,0},
            {170,1},
            {89,0},
            {101,0},
            {122,0},
            {121,0},
            {126,1},
            {93,0}


    };
    static double[][] x= getX(dataset);
    static double[][] y= getY(dataset);
    public static void ImprimirMatriz(double[][] m){
        for (int i = 0; i < m.length; i++) { //filas
            for (int j = 0; j < m[i].length ; j++) { //columnas
                System.out.print(m[i][j] + " ");

            }
            System.out.println("");
        }
    }

    public static double[][] getX(double[][] x){
        double[][] resultado = new double[x.length][x[0].length];
        for (int i = 0; i < x.length; i++) { //filas
            for (int j = 1; j <x[0].length ; j++) {
                resultado[i][0] =1;
                resultado[i][j] =x[i][j-1];
            }
        }
        return resultado;
    }
    public static double[][] getY(double[][] y){
        double[][] resultado = new double[y.length][1];
        for (int i = 0; i < y.length; i++) { //filas
            resultado[i][0] = y[i][y[0].length-1];

        }
        return resultado;
    }
    public static double Sigmoide(double x){
        return 1/(1+(Math.exp(-x)));
    }
    public static double getFuncionX(int numero, double[]w){
        double resultado  = 0;
        System.out.println("valiendo madres: "+ numero);
        for (int i = 1; i < w.length; i++) {
            resultado += x[i][numero]*w[i];
        }
        //System.out.println(w[0]+resultado);
        return Sigmoide(w[0]+resultado);

    }

    public static void LR(){
        double[] Wold = {0,0};
        double[] Wnew = new double[Wold.length];
        double alpha =0.1;
        //ImprimirMatriz(y);

        for (int q = 0; q < 100; q++) {

            System.out.println(Wold[0]+ " " + Wold[1]+ " ");

            for (int i = 0; i <x.length ; i++) {
                double wtem = 0;

                for (int j = 0; j < x[0].length; j++) {
                    wtem += (getFuncionX(j, Wold)-y[j][0] )*x[i][j];
                }
                Wnew[i] = Wold[i] - alpha * wtem;
                wtem = 0;
            }

            for (int i = 0; i <Wold.length ; i++) {
                Wold[i] = Wnew[i];
                //System.out.println(Wold[i]);
            }
        }
    }




    public static void main(String[] args) {
        LR();
        //ImprimirMatriz(getX( dataset));
        //ImprimirMatriz(getY( dataset));


        //generador(6);
        //getGradinte(new  double[][]{{651,23},{762,26},{856,30},{1063,34},{1190,43},{1298,48},{1421,52},{1440,57},{1518,58}});




    }
}
